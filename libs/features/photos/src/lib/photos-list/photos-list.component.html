<div class="photos-viewport" #scrollContainer>
  @if (isLoading() && photos().length === 0) {
    <div class="initial-loading">
      <lib-loading-spinner />
    </div>
  }

  @if (!isLoading() && photos().length === 0) {
    <div class="empty-state">
      <p>No photos available</p>
    </div>
  }

  @if (photos().length > 0) {
    <div class="photo-grid">
      @for (photo of photos(); track photo.id) {
        <lib-photo-card-with-favorite
          [photo]="enrichPhotoWithFavorite(photo)"
          (photoClick)="onPhotoClick(photo)"
          (toggleFavorite)="onToggleFavoriteForPhoto(photo)" />
      }
    </div>

    @if (isLoading() && hasMore()) {
      <div class="loading-more">
        <lib-loading-spinner />
      </div>
    }
  }
</div>

@if (selectedPhoto()) {
  <lib-image-preview-modal
    [photo]="selectedPhoto()!"
    (close)="onClosePreview()"
    (toggleFavorite)="onToggleFavorite()" />
}
